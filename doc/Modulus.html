<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: Modulus</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="./modules/ChanServ/main_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="modules/ChanServ/main.rb">modules/ChanServ/main.rb</a></li>
					
						<li><a href="./modules/QuoteServ/main_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="modules/QuoteServ/main.rb">modules/QuoteServ/main.rb</a></li>
					
						<li><a href="./modules/HostServ/main_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="modules/HostServ/main.rb">modules/HostServ/main.rb</a></li>
					
						<li><a href="./modules/NickServ/main_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="modules/NickServ/main.rb">modules/NickServ/main.rb</a></li>
					
						<li><a href="./modules/BanServ/main_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="modules/BanServ/main.rb">modules/BanServ/main.rb</a></li>
					
						<li><a href="./modules/OperServ/main_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="modules/OperServ/main.rb">modules/OperServ/main.rb</a></li>
					
						<li><a href="./modules/BotServ/main_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="modules/BotServ/main.rb">modules/BotServ/main.rb</a></li>
					
						<li><a href="./protocols/unreal32_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="protocols/unreal32.rb">protocols/unreal32.rb</a></li>
					
						<li><a href="./includes/client_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/client.rb">includes/client.rb</a></li>
					
						<li><a href="./includes/services_modules_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/services_modules.rb">includes/services_modules.rb</a></li>
					
						<li><a href="./includes/user_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/user.rb">includes/user.rb</a></li>
					
						<li><a href="./includes/channel_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/channel.rb">includes/channel.rb</a></li>
					
						<li><a href="./includes/tables_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/tables.rb">includes/tables.rb</a></li>
					
						<li><a href="./includes/core_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/core.rb">includes/core.rb</a></li>
					
						<li><a href="./includes/hook_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/hook.rb">includes/hook.rb</a></li>
					
						<li><a href="./includes/events_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/events.rb">includes/events.rb</a></li>
					
						<li><a href="./includes/channel_user_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/channel_user.rb">includes/channel_user.rb</a></li>
					
						<li><a href="./includes/users_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/users.rb">includes/users.rb</a></li>
					
						<li><a href="./includes/database_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/database.rb">includes/database.rb</a></li>
					
						<li><a href="./includes/origin_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/origin.rb">includes/origin.rb</a></li>
					
						<li><a href="./includes/parse_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/parse.rb">includes/parse.rb</a></li>
					
						<li><a href="./includes/vars_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/vars.rb">includes/vars.rb</a></li>
					
						<li><a href="./includes/logging_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/logging.rb">includes/logging.rb</a></li>
					
						<li><a href="./includes/help_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/help.rb">includes/help.rb</a></li>
					
						<li><a href="./includes/command_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/command.rb">includes/command.rb</a></li>
					
						<li><a href="./includes/service_module_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/service_module.rb">includes/service_module.rb</a></li>
					
						<li><a href="./includes/config_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/config.rb">includes/config.rb</a></li>
					
						<li><a href="./includes/channels_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/channels.rb">includes/channels.rb</a></li>
					
						<li><a href="./includes/module_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/module.rb">includes/module.rb</a></li>
					
						<li><a href="./includes/services_clients_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/services_clients.rb">includes/services_clients.rb</a></li>
					
						<li><a href="./includes/protocol_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/protocol.rb">includes/protocol.rb</a></li>
					
						<li><a href="./includes/module_manager_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="includes/module_manager.rb">includes/module_manager.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">CLASS</span> <a href="Modulus/Account.html">Modulus::Account</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/BanServ.html">Modulus::BanServ</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/BotServ.html">Modulus::BotServ</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/ChanServ.html">Modulus::ChanServ</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Channel.html">Modulus::Channel</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/ChannelUser.html">Modulus::ChannelUser</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Channels.html">Modulus::Channels</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Clients.html">Modulus::Clients</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Command.html">Modulus::Command</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Config.html">Modulus::Config</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/EventCallback.html">Modulus::EventCallback</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Events.html">Modulus::Events</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Hook.html">Modulus::Hook</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/HostServ.html">Modulus::HostServ</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Log.html">Modulus::Log</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Module.html">Modulus::Module</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/ModuleManager.html">Modulus::ModuleManager</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/NickServ.html">Modulus::NickServ</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/OperServ.html">Modulus::OperServ</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/OriginInfo.html">Modulus::OriginInfo</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Parser.html">Modulus::Parser</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/ProtocolAbstraction.html">Modulus::ProtocolAbstraction</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/ProtocolAbstractionMixin.html">Modulus::ProtocolAbstractionMixin</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Pseudoclient.html">Modulus::Pseudoclient</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/QuoteServ.html">Modulus::QuoteServ</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/ReservedNick.html">Modulus::ReservedNick</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Service.html">Modulus::Service</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/ServiceModules.html">Modulus::ServiceModules</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/User.html">Modulus::User</a></li>
					
					<li><span class="type">CLASS</span> <a href="Modulus/Users.html">Modulus::Users</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-addCmd">::addCmd</a></li>
					
					<li><a href="#method-c-addHook">::addHook</a></li>
					
					<li><a href="#method-c-addMessageHook">::addMessageHook</a></li>
					
					<li><a href="#method-c-addService">::addService</a></li>
					
					<li><a href="#method-c-channels">::channels</a></li>
					
					<li><a href="#method-c-cmdHooks">::cmdHooks</a></li>
					
					<li><a href="#method-c-config">::config</a></li>
					
					<li><a href="#method-c-doHelp">::doHelp</a></li>
					
					<li><a href="#method-c-events">::events</a></li>
					
					<li><a href="#method-c-fantasy">::fantasy</a></li>
					
					<li><a href="#method-c-hooks">::hooks</a></li>
					
					<li><a href="#method-c-hostname">::hostname</a></li>
					
					<li><a href="#method-c-link">::link</a></li>
					
					<li><a href="#method-c-messageHooks">::messageHooks</a></li>
					
					<li><a href="#method-c-name">::name</a></li>
					
					<li><a href="#method-c-prepDatabase">::prepDatabase</a></li>
					
					<li><a href="#method-c-reply">::reply</a></li>
					
					<li><a href="#method-c-runCmds">::runCmds</a></li>
					
					<li><a href="#method-c-runHooks">::runHooks</a></li>
					
					<li><a href="#method-c-scheduler">::scheduler</a></li>
					
					<li><a href="#method-c-sendHelp">::sendHelp</a></li>
					
					<li><a href="#method-c-sendHelpList">::sendHelpList</a></li>
					
					<li><a href="#method-c-serviceModules">::serviceModules</a></li>
					
					<li><a href="#method-c-start">::start</a></li>
					
					<li><a href="#method-c-startConnectionThread">::startConnectionThread</a></li>
					
					<li><a href="#method-c-startDB">::startDB</a></li>
					
					<li><a href="#method-c-users">::users</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="./LICENSE.html">LICENSE</a></li>
				
					<li class="file"><a href="./README.html">README</a></li>
				
					<li class="file"><a href="./Rakefile.html">Rakefile</a></li>
				
					<li class="file"><a href="./head.html">head</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./Modulus.html">Modulus</a></li>
				
					<li><a href="./Modulus/Account.html">Modulus::Account</a></li>
				
					<li><a href="./Modulus/BanServ.html">Modulus::BanServ</a></li>
				
					<li><a href="./Modulus/BanServ/Autokill.html">Modulus::BanServ::Autokill</a></li>
				
					<li><a href="./Modulus/BanServ/Regexkill.html">Modulus::BanServ::Regexkill</a></li>
				
					<li><a href="./Modulus/BotServ.html">Modulus::BotServ</a></li>
				
					<li><a href="./Modulus/BotServ/BotServBot.html">Modulus::BotServ::BotServBot</a></li>
				
					<li><a href="./Modulus/BotServ/BotServChannel.html">Modulus::BotServ::BotServChannel</a></li>
				
					<li><a href="./Modulus/ChanServ.html">Modulus::ChanServ</a></li>
				
					<li><a href="./Modulus/ChanServ/Channel.html">Modulus::ChanServ::Channel</a></li>
				
					<li><a href="./Modulus/ChanServ/ChannelUsers.html">Modulus::ChanServ::ChannelUsers</a></li>
				
					<li><a href="./Modulus/Channel.html">Modulus::Channel</a></li>
				
					<li><a href="./Modulus/ChannelUser.html">Modulus::ChannelUser</a></li>
				
					<li><a href="./Modulus/Channels.html">Modulus::Channels</a></li>
				
					<li><a href="./Modulus/Clients.html">Modulus::Clients</a></li>
				
					<li><a href="./Modulus/Command.html">Modulus::Command</a></li>
				
					<li><a href="./Modulus/Config.html">Modulus::Config</a></li>
				
					<li><a href="./Modulus/EventCallback.html">Modulus::EventCallback</a></li>
				
					<li><a href="./Modulus/Events.html">Modulus::Events</a></li>
				
					<li><a href="./Modulus/Hook.html">Modulus::Hook</a></li>
				
					<li><a href="./Modulus/HostServ.html">Modulus::HostServ</a></li>
				
					<li><a href="./Modulus/HostServ/Host.html">Modulus::HostServ::Host</a></li>
				
					<li><a href="./Modulus/Log.html">Modulus::Log</a></li>
				
					<li><a href="./Modulus/Module.html">Modulus::Module</a></li>
				
					<li><a href="./Modulus/ModuleManager.html">Modulus::ModuleManager</a></li>
				
					<li><a href="./Modulus/NickServ.html">Modulus::NickServ</a></li>
				
					<li><a href="./Modulus/NickServ/Account.html">Modulus::NickServ::Account</a></li>
				
					<li><a href="./Modulus/NickServ/Nick.html">Modulus::NickServ::Nick</a></li>
				
					<li><a href="./Modulus/OperServ.html">Modulus::OperServ</a></li>
				
					<li><a href="./Modulus/OriginInfo.html">Modulus::OriginInfo</a></li>
				
					<li><a href="./Modulus/Parser.html">Modulus::Parser</a></li>
				
					<li><a href="./Modulus/ProtocolAbstraction.html">Modulus::ProtocolAbstraction</a></li>
				
					<li><a href="./Modulus/ProtocolAbstractionMixin.html">Modulus::ProtocolAbstractionMixin</a></li>
				
					<li><a href="./Modulus/Pseudoclient.html">Modulus::Pseudoclient</a></li>
				
					<li><a href="./Modulus/QuoteServ.html">Modulus::QuoteServ</a></li>
				
					<li><a href="./Modulus/QuoteServ/Quote.html">Modulus::QuoteServ::Quote</a></li>
				
					<li><a href="./Modulus/QuoteServ/QuoteChannel.html">Modulus::QuoteServ::QuoteChannel</a></li>
				
					<li><a href="./Modulus/QuoteServ/QuoteRater.html">Modulus::QuoteServ::QuoteRater</a></li>
				
					<li><a href="./Modulus/ReservedNick.html">Modulus::ReservedNick</a></li>
				
					<li><a href="./Modulus/Service.html">Modulus::Service</a></li>
				
					<li><a href="./Modulus/ServiceModules.html">Modulus::ServiceModules</a></li>
				
					<li><a href="./Modulus/User.html">Modulus::User</a></li>
				
					<li><a href="./Modulus/Users.html">Modulus::Users</a></li>
				
					<li><a href="./Object.html">Object</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">Modulus</h1>

		<div id="description">
			<p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>
<hr style="height: 1px"></hr><p>
<a href="Modulus.html">Modulus</a> IRC Services Copyright (C) 2010  <a
href="Modulus.html">Modulus</a> IRC Services Team
</p>
<p>
This program is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your option)
any later version.
</p>
<p>
This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.
</p>
<p>
You should have received a copy of the GNU General Public License along
with this program.  If not, see <<a
href="http://www.gnu.org/licenses/">www.gnu.org/licenses/</a>>.
</p>

		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="add-md-method" class="method-detail ">
				<a name="method-c-addCmd"></a>

				<div class="method-heading">
				
					<span class="method-name">addCmd</span><span
						class="method-args">(modClass, receiver, cmdStr, funcName, shortHelp, longHelp="", allowFantasy=false)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
New service commands, such as a <a
href="Modulus/NickServ.html">NickServ</a> REGISTER, should be fed here.
This function will create the appropriate hooks and add info for help. The
last parameter, if true, enables the use of the command as a
&#8220;fantasy&#8221; command in channels.
</p>
					

					
					<div class="method-source-code"
						id="add-md-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 311</span>
311:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">addCmd</span>(<span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">receiver</span>, <span class="ruby-identifier">cmdStr</span>, <span class="ruby-identifier">funcName</span>, <span class="ruby-identifier">shortHelp</span>, <span class="ruby-identifier">longHelp</span>=<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">allowFantasy</span>=<span class="ruby-keyword kw">false</span>)
312:     <span class="ruby-identifier">cmdStr</span>.<span class="ruby-identifier">upcase!</span>
313:     <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">receiver</span>] = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@cmdHooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">receiver</span>
314:     <span class="ruby-comment cmt">#@cmdHooks[receiver][cmdStr] = Array.new unless @cmdHooks[receiver].has_key? cmdStr</span>
315: 
316:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Adding command hook: #{cmdStr} for #{modClass.class}&quot;</span>
317: 
318:     <span class="ruby-identifier">hook</span> = <span class="ruby-constant">Command</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">funcName</span>, <span class="ruby-identifier">cmdStr</span>, <span class="ruby-identifier">shortHelp</span>, <span class="ruby-identifier">longHelp</span>, <span class="ruby-identifier">allowFantasy</span>)
319: 
320:     <span class="ruby-comment cmt">#@cmdHooks[receiver][cmdStr] &lt;&lt; hook</span>
321:     <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">receiver</span>][<span class="ruby-identifier">cmdStr</span>] = <span class="ruby-identifier">hook</span>
322:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="add-ook-method" class="method-detail ">
				<a name="method-c-addHook"></a>

				<div class="method-heading">
				
					<span class="method-name">addHook</span><span
						class="method-args">(modClass, funcName, hookType)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Create a generic hook. <a href="Modulus/Events.html">Events</a> should be
used instead.
</p>
					

					
					<div class="method-source-code"
						id="add-ook-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 342</span>
342:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">addHook</span>(<span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">funcName</span>, <span class="ruby-identifier">hookType</span>)
343:     <span class="ruby-identifier">@@hooks</span>[<span class="ruby-identifier">hookType</span>] = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@hooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">hookType</span>
344:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Adding hook: type #{hookType} for #{modClass.class}&quot;</span>
345: 
346:     <span class="ruby-identifier">hook</span> = <span class="ruby-constant">Hook</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">funcName</span>)
347: 
348:     <span class="ruby-identifier">@@hooks</span>[<span class="ruby-identifier">hookType</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">hook</span>
349:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="add-essage-ook-method" class="method-detail ">
				<a name="method-c-addMessageHook"></a>

				<div class="method-heading">
				
					<span class="method-name">addMessageHook</span><span
						class="method-args">(modClass, funcName, hookType, receiver)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
DEPRECATED This was used to hook IRC messages, but events should be used
now.
</p>
					

					
					<div class="method-source-code"
						id="add-essage-ook-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 328</span>
328:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">addMessageHook</span>(<span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">funcName</span>, <span class="ruby-identifier">hookType</span>, <span class="ruby-identifier">receiver</span>)
329:     <span class="ruby-identifier">@@messageHooks</span>[<span class="ruby-identifier">receiver</span>] = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@messageHooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">receiver</span>
330:     <span class="ruby-identifier">@@messageHooks</span>[<span class="ruby-identifier">receiver</span>][<span class="ruby-identifier">hookType</span>] = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@messageHooks</span>[<span class="ruby-identifier">receiver</span>].<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">hookType</span>
331: 
332:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Adding message hook: type #{hookType} for #{modClass.class}&quot;</span>
333: 
334:     <span class="ruby-identifier">hook</span> = <span class="ruby-constant">Hook</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">funcName</span>)
335: 
336:     <span class="ruby-identifier">@@messageHooks</span>[<span class="ruby-identifier">receiver</span>][<span class="ruby-identifier">hookType</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">hook</span>
337:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="add-ervice-method" class="method-detail ">
				<a name="method-c-addService"></a>

				<div class="method-heading">
				
					<span class="method-name">addService</span><span
						class="method-args">(name, modClass, description)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
When a services module is loaded, if it creates a new &#8220;service&#8221;
(<a href="Modulus/NickServ.html">NickServ</a>, <a
href="Modulus/ChanServ.html">ChanServ</a>, etc.) it should register through
this function. This will add the service by name fo the service modules
data structure.
</p>
					

					
					<div class="method-source-code"
						id="add-ervice-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 301</span>
301:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">addService</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">description</span>)
302:     <span class="ruby-identifier">@@serviceModules</span>.<span class="ruby-identifier">addService</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">modClass</span>, <span class="ruby-identifier">description</span>)
303:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="channels-method" class="method-detail ">
				<a name="method-c-channels"></a>

				<div class="method-heading">
				
					<span class="method-name">channels</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="channels-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 29</span>
29:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">channels</span>
30:     <span class="ruby-identifier">@@channels</span>
31:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="cmd-ooks-method" class="method-detail ">
				<a name="method-c-cmdHooks"></a>

				<div class="method-heading">
				
					<span class="method-name">cmdHooks</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="cmd-ooks-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 37</span>
37:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">cmdHooks</span>
38:     <span class="ruby-identifier">@@cmdHooks</span>
39:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="config-method" class="method-detail ">
				<a name="method-c-config"></a>

				<div class="method-heading">
				
					<span class="method-name">config</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="config-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config</span>
62:     <span class="ruby-identifier">@@config</span>
63:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="do-elp-method" class="method-detail ">
				<a name="method-c-doHelp"></a>

				<div class="method-heading">
				
					<span class="method-name">doHelp</span><span
						class="method-args">(origin)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
This is called by a privmsg event.
</p>
<p>
Check if the message starts with HELP. If so, figure out what the user is
asking about, then pass it along to the appropriate function.
</p>
					

					
					<div class="method-source-code"
						id="do-elp-source">
<pre>
    <span class="ruby-comment cmt"># File includes/help.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">doHelp</span>(<span class="ruby-identifier">origin</span>)
62:     <span class="ruby-identifier">origin</span> = <span class="ruby-identifier">origin</span>[<span class="ruby-value">0</span>]
63:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:privmsg</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:notice</span>
64:     
65:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">upcase</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-value str">&quot;HELP&quot;</span>
66: 
67:     <span class="ruby-identifier">arr</span> = <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">upcase</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot; &quot;</span>)
68:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arr</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
69:       <span class="ruby-identifier">sendHelpList</span>(<span class="ruby-identifier">origin</span>)
70:     <span class="ruby-keyword kw">else</span>
71:       <span class="ruby-identifier">sendHelp</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-identifier">arr</span>[<span class="ruby-value">1</span>])
72:     <span class="ruby-keyword kw">end</span>
73:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="events-method" class="method-detail ">
				<a name="method-c-events"></a>

				<div class="method-heading">
				
					<span class="method-name">events</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="events-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 21</span>
21:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">events</span>
22:     <span class="ruby-identifier">@@events</span>
23:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="fantasy-method" class="method-detail ">
				<a name="method-c-fantasy"></a>

				<div class="method-heading">
				
					<span class="method-name">fantasy</span><span
						class="method-args">(origin)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Check to see if a channel message is a fantasy command. If so, run the
appropriate function.
</p>
					

					
					<div class="method-source-code"
						id="fantasy-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 238</span>
238:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">fantasy</span>(<span class="ruby-identifier">origin</span>)
239:     <span class="ruby-identifier">origin</span> = <span class="ruby-identifier">origin</span>[<span class="ruby-value">0</span>]
240:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">isChannel?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>
241: 
242:     <span class="ruby-identifier">prefix</span> = <span class="ruby-identifier">@@config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Core'</span>, <span class="ruby-value str">'fantasy_prefix'</span>)
243: 
244:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
245:       <span class="ruby-keyword kw">return</span>
246:     <span class="ruby-keyword kw">end</span>
247: 
248:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
249:       <span class="ruby-keyword kw">return</span>
250:     <span class="ruby-keyword kw">end</span>
251: 
252:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-node">&quot;Checking for fantasy prefix (#{prefix})&quot;</span>
253: 
254:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-identifier">prefix</span>
255:       <span class="ruby-keyword kw">return</span>
256:     <span class="ruby-keyword kw">end</span>
257: 
258:     <span class="ruby-identifier">command</span> = <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">upcase</span>[<span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">..</span><span class="ruby-identifier">origin</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">-</span><span class="ruby-identifier">prefix</span>.<span class="ruby-identifier">length</span>]
259: 
260:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-node">&quot;Got what looks like a fantasy command: #{command}&quot;</span>
261: 
262:     <span class="ruby-identifier">@@cmdHooks</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">receiver</span><span class="ruby-operator">|</span>
263:       <span class="ruby-identifier">@@serviceModules</span>.<span class="ruby-identifier">modules</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">mod</span><span class="ruby-operator">|</span> 
264:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@channels</span>.<span class="ruby-identifier">channels</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>
265: 
266:         <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-node">&quot;Checking if #{mod} is in #{origin.target}&quot;</span>
267: 
268:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@channels</span>.<span class="ruby-identifier">channels</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>].<span class="ruby-identifier">users</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">mod</span>
269:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@cmdHooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">mod</span>
270:             <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-value str">&quot;No commands for present module.&quot;</span>
271:             <span class="ruby-keyword kw">next</span>
272:           <span class="ruby-keyword kw">end</span>
273: 
274:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">mod</span>].<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">command</span>
275:             <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-value str">&quot;Present module does not have this command.&quot;</span>
276:             <span class="ruby-keyword kw">next</span>
277:           <span class="ruby-keyword kw">end</span>
278: 
279:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">mod</span>][<span class="ruby-identifier">command</span>].<span class="ruby-identifier">allowFantasy</span>
280:             <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-value str">&quot;This command is not enabled for fantasy use.&quot;</span>
281:             <span class="ruby-keyword kw">next</span>
282:           <span class="ruby-keyword kw">end</span>
283: 
284:           <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-node">&quot;Definitely a fantasy command. Running: #{origin}&quot;</span>
285: 
286:           <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">mod</span>][<span class="ruby-identifier">command</span>].<span class="ruby-identifier">run</span>(<span class="ruby-identifier">origin</span>)
287:           <span class="ruby-keyword kw">return</span>
288:         <span class="ruby-keyword kw">else</span>
289:           <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'core'</span>, <span class="ruby-node">&quot;#{mod} is not in the channel. Skipping.&quot;</span>
290:           <span class="ruby-keyword kw">next</span>
291:         <span class="ruby-keyword kw">end</span>
292:       }
293:     }
294:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="hooks-method" class="method-detail ">
				<a name="method-c-hooks"></a>

				<div class="method-heading">
				
					<span class="method-name">hooks</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="hooks-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hooks</span>
46:     <span class="ruby-identifier">@@hooks</span>
47:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="hostname-method" class="method-detail ">
				<a name="method-c-hostname"></a>

				<div class="method-heading">
				
					<span class="method-name">hostname</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="hostname-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">hostname</span>
54:     <span class="ruby-identifier">@@hostname</span>
55:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="link-method" class="method-detail ">
				<a name="method-c-link"></a>

				<div class="method-heading">
				
					<span class="method-name">link</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="link-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 65</span>
65:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">link</span>
66:     <span class="ruby-identifier">@@link</span>
67:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="message-ooks-method" class="method-detail ">
				<a name="method-c-messageHooks"></a>

				<div class="method-heading">
				
					<span class="method-name">messageHooks</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="message-ooks-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">messageHooks</span>
42:     <span class="ruby-identifier">@@messageHooks</span>
43:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="name-method" class="method-detail ">
				<a name="method-c-name"></a>

				<div class="method-heading">
				
					<span class="method-name">name</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="name-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>
58:     <span class="ruby-identifier">@@name</span>
59:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="prep-atabase-method" class="method-detail ">
				<a name="method-c-prepDatabase"></a>

				<div class="method-heading">
				
					<span class="method-name">prepDatabase</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Prepare the database for use. This should be called during start-up by an
event. Any table creation or upgrades should be done here.
</p>
					

					
					<div class="method-source-code"
						id="prep-atabase-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 363</span>
363:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">prepDatabase</span>
364: 
365:     <span class="ruby-comment cmt"># TODO: There needs to be some way for this to check for out-of-date</span>
366:     <span class="ruby-comment cmt"># schemas and update them as appropriate. Ruby and ActiveRecord facilitate</span>
367:     <span class="ruby-comment cmt"># this, but I'm not totally sure how that works yet.</span>
368: 
369:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">ReservedNick</span>.<span class="ruby-identifier">table_exists?</span>
370:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Schema</span>.<span class="ruby-identifier">define</span> <span class="ruby-keyword kw">do</span>
371:         <span class="ruby-identifier">create_table</span> <span class="ruby-value">:reserved_nicks</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
372:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-value">:nick</span>, <span class="ruby-value">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
373:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-value">:module</span>, <span class="ruby-value">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
374:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">datetime</span> <span class="ruby-value">:dateAdded</span>
375:         <span class="ruby-keyword kw">end</span>
376:       <span class="ruby-keyword kw">end</span>
377:     <span class="ruby-keyword kw">end</span>
378: 
379:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Account</span>.<span class="ruby-identifier">table_exists?</span>
380:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Schema</span>.<span class="ruby-identifier">define</span> <span class="ruby-keyword kw">do</span>
381:         <span class="ruby-identifier">create_table</span> <span class="ruby-value">:accounts</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
382:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-value">:username</span>, <span class="ruby-value">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
383:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-value">:email</span>, <span class="ruby-value">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
384:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-value">:password</span>, <span class="ruby-value">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
385:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">datetime</span> <span class="ruby-value">:dateRegistered</span>, <span class="ruby-value">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
386:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">datetime</span> <span class="ruby-value">:dateConnected</span>
387:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">datetime</span> <span class="ruby-value">:dateDisconnected</span>
388:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-value">:lastQuitMessage</span>
389:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">boolean</span> <span class="ruby-value">:suspended</span>, <span class="ruby-value">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
390:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">text</span> <span class="ruby-value">:notes</span>
391:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">boolean</span> <span class="ruby-value">:noexpire</span>, <span class="ruby-value">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
392:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">boolean</span> <span class="ruby-value">:verified</span>, <span class="ruby-value">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
393:         <span class="ruby-keyword kw">end</span>
394:       <span class="ruby-keyword kw">end</span>
395:     <span class="ruby-keyword kw">end</span>
396:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reply-method" class="method-detail ">
				<a name="method-c-reply"></a>

				<div class="method-heading">
				
					<span class="method-name">reply</span><span
						class="method-args">(origin, message)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Send a message to the user that sent the given origin.
</p>
					

					
					<div class="method-source-code"
						id="reply-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 172</span>
172:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-identifier">message</span>)
173:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">message</span>.<span class="ruby-identifier">empty?</span>
174:       <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">warning</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Attempted to send an empty message to #{origin.target} (#{origin.source})&quot;</span>
175:       <span class="ruby-keyword kw">return</span>
176:     <span class="ruby-keyword kw">end</span>
177: 
178:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">isChannel?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>
179:       <span class="ruby-comment cmt"># TODO: Make this come from the actual service that sent it!</span>
180:       <span class="ruby-identifier">message</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span>
181:         <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">sendPrivmsg</span>(<span class="ruby-value str">&quot;Global&quot;</span>, <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>, <span class="ruby-identifier">msg</span>)
182:       }
183:     <span class="ruby-keyword kw">else</span>
184:       <span class="ruby-identifier">message</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">msg</span><span class="ruby-operator">|</span>
185:         <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">sendNotice</span>(<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>, <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">source</span>, <span class="ruby-identifier">msg</span>)
186:       }
187:     <span class="ruby-keyword kw">end</span>
188:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="run-mds-method" class="method-detail ">
				<a name="method-c-runCmds"></a>

				<div class="method-heading">
				
					<span class="method-name">runCmds</span><span
						class="method-args">(cmdOrigin)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run hooks for the given command, if the command is sent privately and is
sent to a user that can receive commands, and the message contains a
command
</p>
					

					
					<div class="method-source-code"
						id="run-mds-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 221</span>
221:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">runCmds</span>(<span class="ruby-identifier">cmdOrigin</span>)
222:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">isChannel?</span> <span class="ruby-identifier">cmdOrigin</span>.<span class="ruby-identifier">target</span>
223: 
224:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@cmdHooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">cmdOrigin</span>.<span class="ruby-identifier">target</span>
225:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">cmdOrigin</span>.<span class="ruby-identifier">target</span>].<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">cmdOrigin</span>.<span class="ruby-identifier">cmd</span>
226: 
227:         <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Running all command hooks for #{cmdOrigin.cmd}&quot;</span>
228: 
229:         <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">cmdOrigin</span>.<span class="ruby-identifier">target</span>][<span class="ruby-identifier">cmdOrigin</span>.<span class="ruby-identifier">cmd</span>].<span class="ruby-identifier">run</span>(<span class="ruby-identifier">cmdOrigin</span>)
230:       <span class="ruby-keyword kw">end</span>
231:     <span class="ruby-keyword kw">end</span>
232:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="run-ooks-method" class="method-detail ">
				<a name="method-c-runHooks"></a>

				<div class="method-heading">
				
					<span class="method-name">runHooks</span><span
						class="method-args">(origin)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Run hooks and message hooks for a given origin type.
</p>
					

					
					<div class="method-source-code"
						id="run-ooks-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 193</span>
193:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">runHooks</span>(<span class="ruby-identifier">origin</span>)
194:     <span class="ruby-identifier">@@events</span>.<span class="ruby-identifier">event</span>(<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">type</span>, <span class="ruby-identifier">origin</span>)
195: 
196:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@hooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">type</span>
197: 
198:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Running all hooks of type #{origin.type}&quot;</span>
199: 
200:       <span class="ruby-identifier">@@hooks</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">type</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span>
201:         <span class="ruby-identifier">hook</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">origin</span>)
202:       }
203:     <span class="ruby-keyword kw">end</span>
204: 
205:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@messageHooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>
206:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">@@messageHooks</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>].<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">type</span>
207: 
208:         <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Running all message hooks of type #{origin.type}&quot;</span>
209: 
210:         <span class="ruby-identifier">@@messageHooks</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>][<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">type</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span>
211:           <span class="ruby-identifier">hook</span>.<span class="ruby-identifier">run</span>(<span class="ruby-identifier">origin</span>)
212:         }
213:       <span class="ruby-keyword kw">end</span>
214:     <span class="ruby-keyword kw">end</span>
215:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="scheduler-method" class="method-detail ">
				<a name="method-c-scheduler"></a>

				<div class="method-heading">
				
					<span class="method-name">scheduler</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="scheduler-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 49</span>
49:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">scheduler</span>
50:     <span class="ruby-identifier">@@scheduler</span>
51:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="send-elp-method" class="method-detail ">
				<a name="method-c-sendHelp"></a>

				<div class="method-heading">
				
					<span class="method-name">sendHelp</span><span
						class="method-args">(origin, command)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Send the full long help for the given command using te <a
href="Modulus.html">Modulus</a> reply function.
</p>
					

					
					<div class="method-source-code"
						id="send-elp-source">
<pre>
    <span class="ruby-comment cmt"># File includes/help.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">sendHelp</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-identifier">command</span>)
26:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@cmdHooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>
27:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>].<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">command</span>
28: 
29:     <span class="ruby-identifier">shortHelp</span> = <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>][<span class="ruby-identifier">command</span>].<span class="ruby-identifier">shortDesc</span>
30:     <span class="ruby-identifier">longHelp</span> = <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>][<span class="ruby-identifier">command</span>].<span class="ruby-identifier">longDesc</span>
31: 
32:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-node">&quot;#{command}  #{shortHelp}&quot;</span>)
33:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-value str">&quot; &quot;</span>)
34:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-identifier">longHelp</span>)
35:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="send-elp-ist-method" class="method-detail ">
				<a name="method-c-sendHelpList"></a>

				<div class="method-heading">
				
					<span class="method-name">sendHelpList</span><span
						class="method-args">(origin)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Send the list of commands for the module specified in the origin info with
short help in a formatted list.
</p>
					

					
					<div class="method-source-code"
						id="send-elp-ist-source">
<pre>
    <span class="ruby-comment cmt"># File includes/help.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">sendHelpList</span>(<span class="ruby-identifier">origin</span>)
42:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@cmdHooks</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>
43:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">@@serviceModules</span>.<span class="ruby-identifier">modules</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>
44: 
45:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-identifier">@@serviceModules</span>.<span class="ruby-identifier">modules</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>].<span class="ruby-identifier">description</span>)
46:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-value str">&quot; &quot;</span>)
47: 
48:     <span class="ruby-identifier">@@cmdHooks</span>[<span class="ruby-identifier">origin</span>.<span class="ruby-identifier">target</span>].<span class="ruby-identifier">values</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">cmd</span><span class="ruby-operator">|</span>
49:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;  %15.15s  %s&quot;</span>, <span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">commandText</span>, <span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">shortDesc</span>))
50:     }
51:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-value str">&quot; &quot;</span>)
52:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reply</span>(<span class="ruby-identifier">origin</span>, <span class="ruby-value str">&quot;Use HELP COMMAND for more information on a specific command, if available.&quot;</span>)
53:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="service-odules-method" class="method-detail ">
				<a name="method-c-serviceModules"></a>

				<div class="method-heading">
				
					<span class="method-name">serviceModules</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="service-odules-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">serviceModules</span>
34:     <span class="ruby-identifier">@@serviceModules</span>
35:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="start-method" class="method-detail ">
				<a name="method-c-start"></a>

				<div class="method-heading">
				
					<span class="method-name">start</span><span
						class="method-args">(config)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
When <a href="Modulus.html">Modulus</a> starts, this is the first thing
that runs at the end of the main launcher.
</p>
					

					
					<div class="method-source-code"
						id="start-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 25</span>
 25:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">start</span>(<span class="ruby-identifier">config</span>)
 26:     <span class="ruby-comment cmt"># Module attribute accessors.</span>
 27: 
 28:     <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">mattr_accessor</span> <span class="ruby-value">:events</span>, <span class="ruby-value">:clients</span>, <span class="ruby-value">:serviceModules</span>, <span class="ruby-value">:users</span>, <span class="ruby-value">:hooks</span>, <span class="ruby-value">:cmdHooks</span>, <span class="ruby-value">:messageHooks</span>, <span class="ruby-value">:scheduler</span>, <span class="ruby-value">:hostname</span>, <span class="ruby-value">:name</span>, <span class="ruby-value">:config</span>
 29: 
 30:     <span class="ruby-identifier">@@config</span> = <span class="ruby-identifier">config</span>
 31: 
 32:     <span class="ruby-comment cmt"># We want to go ahead and load the logger early since we'll want to record</span>
 33:     <span class="ruby-comment cmt"># the load process. Config has to be loaded before this since it will affect</span>
 34:     <span class="ruby-comment cmt"># where logs go and how verbose they are.</span>
 35: 
 36:     <span class="ruby-identifier">$log</span> = <span class="ruby-constant">Modulus</span><span class="ruby-operator">::</span><span class="ruby-constant">Log</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span>)
 37:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">info</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;#{NAME} version #{VERSION} is starting.&quot;</span>
 38: 
 39: 
 40:     <span class="ruby-comment cmt"># Lots of classes to instantiate.</span>
 41:     <span class="ruby-comment cmt"># It probably wouldn't hurt to have this event-driven, but we'll at least</span>
 42:     <span class="ruby-comment cmt"># need to keep the event class here for that to work.</span>
 43: 
 44:     <span class="ruby-identifier">@@events</span> = <span class="ruby-constant">Modulus</span><span class="ruby-operator">::</span><span class="ruby-constant">Events</span>.<span class="ruby-identifier">new</span>
 45: 
 46:     <span class="ruby-identifier">@@clients</span> = <span class="ruby-constant">Modulus</span><span class="ruby-operator">::</span><span class="ruby-constant">Clients</span>.<span class="ruby-identifier">new</span>
 47:     <span class="ruby-identifier">@@serviceModules</span> = <span class="ruby-constant">Modulus</span><span class="ruby-operator">::</span><span class="ruby-constant">ServiceModules</span>.<span class="ruby-identifier">new</span>
 48:     <span class="ruby-identifier">@@users</span> = <span class="ruby-constant">Modulus</span><span class="ruby-operator">::</span><span class="ruby-constant">Users</span>.<span class="ruby-identifier">new</span>
 49:     <span class="ruby-identifier">@@channels</span> = <span class="ruby-constant">Modulus</span><span class="ruby-operator">::</span><span class="ruby-constant">Channels</span>.<span class="ruby-identifier">new</span>
 50: 
 51:     <span class="ruby-comment cmt"># Classes are ready. Now we need some hash tables for runtime data, like</span>
 52:     <span class="ruby-comment cmt"># hooks. These will probably go away before beta since everything will be</span>
 53:     <span class="ruby-comment cmt"># driven by the Events class.</span>
 54: 
 55:     <span class="ruby-identifier">@@hooks</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
 56:     <span class="ruby-identifier">@@cmdHooks</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
 57:     <span class="ruby-identifier">@@messageHooks</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
 58: 
 59:     <span class="ruby-comment cmt"># The scheduler gets started now that everything is instantiated and tables</span>
 60:     <span class="ruby-comment cmt"># are ready. We're using a third-party library for this. Why reinvent it?</span>
 61: 
 62:     <span class="ruby-identifier">@@scheduler</span> = <span class="ruby-constant">Rufus</span><span class="ruby-operator">::</span><span class="ruby-constant">Scheduler</span>.<span class="ruby-identifier">start_new</span>
 63:     
 64:     <span class="ruby-comment cmt"># Let's go ahead and pull some config values into the class since we'll</span>
 65:     <span class="ruby-comment cmt"># probably need to use them quite a bit.</span>
 66: 
 67:     <span class="ruby-identifier">@@hostname</span> = <span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">&quot;Core&quot;</span>, <span class="ruby-value str">&quot;services_hostname&quot;</span>)
 68:     <span class="ruby-identifier">@@name</span> = <span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">&quot;Core&quot;</span>, <span class="ruby-value str">&quot;services_name&quot;</span>)
 69: 
 70:     <span class="ruby-comment cmt"># Important config values are in memory, classes are ready, and tables are</span>
 71:     <span class="ruby-comment cmt"># instantiated. Since we're event-driven, we'll need to register some</span>
 72:     <span class="ruby-comment cmt"># events that will run in the core code.</span>
 73: 
 74:     <span class="ruby-comment cmt"># When we're done connecting to whatever database we're configured to use,</span>
 75:     <span class="ruby-comment cmt"># we have to make sure it is ready for use and has tables we need.</span>
 76:     <span class="ruby-identifier">@@events</span>.<span class="ruby-identifier">register</span>(<span class="ruby-value">:database_connected</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-value str">&quot;prepDatabase&quot;</span>)
 77: 
 78:     <span class="ruby-comment cmt"># Help is currently controlled by the core. Presumably, almost all modules</span>
 79:     <span class="ruby-comment cmt"># will have commands or other features that might require some explanation</span>
 80:     <span class="ruby-comment cmt"># for end users or network staff. It is therefore reasonable that we include</span>
 81:     <span class="ruby-comment cmt"># help as part of the core code, rather than as a module.</span>
 82:     <span class="ruby-comment cmt">#</span>
 83:     <span class="ruby-comment cmt"># In order for help to work, we have to intercept all PRIVMSGs and NOTICES</span>
 84:     <span class="ruby-comment cmt"># as events to see if they are requests for help or information.</span>
 85:     <span class="ruby-identifier">@@events</span>.<span class="ruby-identifier">register</span>(<span class="ruby-value">:privmsg</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-value str">&quot;doHelp&quot;</span>)
 86:     <span class="ruby-identifier">@@events</span>.<span class="ruby-identifier">register</span>(<span class="ruby-value">:notice</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-value str">&quot;doHelp&quot;</span>)
 87: 
 88:     <span class="ruby-comment cmt"># We also have to intercept PRIVMSGs to check if they are fantasy commands.</span>
 89:     <span class="ruby-identifier">@@events</span>.<span class="ruby-identifier">register</span>(<span class="ruby-value">:privmsg</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-value str">&quot;fantasy&quot;</span>)
 90: 
 91:     <span class="ruby-comment cmt"># Now it's time to load our modules. This will likely be moved off to its</span>
 92:     <span class="ruby-comment cmt"># own file at some point, but for now we do it here. Modules are stored in</span>
 93:     <span class="ruby-comment cmt"># the modules directory, each inside their own directory. There can be many</span>
 94:     <span class="ruby-comment cmt"># files for each module. Right now, we're loading all of them here. What we</span>
 95:     <span class="ruby-comment cmt"># should do, though, is just load main.rb and let it take care of including</span>
 96:     <span class="ruby-comment cmt"># other files as needed.</span>
 97:     <span class="ruby-comment cmt">#</span>
 98:     <span class="ruby-comment cmt"># We might need to change this to make it more friendly to dynamic module</span>
 99:     <span class="ruby-comment cmt"># reloading, but that's probably something that will happen when we move it</span>
100:     <span class="ruby-comment cmt"># to another file.</span>
101:     <span class="ruby-constant">Dir</span>[<span class="ruby-value str">&quot;./modules/*&quot;</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">servDir</span><span class="ruby-operator">|</span>
102:       <span class="ruby-identifier">servName</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span> <span class="ruby-identifier">servDir</span>
103:       <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Attemping to load module #{servName}.&quot;</span>
104: 
105:       <span class="ruby-constant">Dir</span>[<span class="ruby-node">&quot;#{servDir}/*.rb&quot;</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
106:         <span class="ruby-identifier">load</span>(<span class="ruby-identifier">file</span>)
107:       }
108: 
109:       <span class="ruby-identifier">eval</span>(<span class="ruby-node">&quot;#{servName}.new&quot;</span>)
110:     }
111: 
112:     <span class="ruby-comment cmt"># Start the database. This will connect us, open a file, or whatever has to</span>
113:     <span class="ruby-comment cmt"># be done for the selected database, and then fire the event.</span>
114:     <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">startDB</span>()
115: 
116:     <span class="ruby-comment cmt"># Next, we'll need to load the appropriate file for the IRC server protocol</span>
117:     <span class="ruby-comment cmt"># we're configured to use. These are kept in the protocol directory. We'll</span>
118:     <span class="ruby-comment cmt"># first check if the file exists, then load it. No checks are made here if</span>
119:     <span class="ruby-comment cmt"># the file contains everything it needs to.</span>
120:     <span class="ruby-identifier">protocol</span> = <span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Network'</span>, <span class="ruby-value str">'link_protocol'</span>)
121: 
122:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;Checking for protocol handler for #{protocol}.&quot;</span>
123: 
124:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span> <span class="ruby-node">&quot;protocols/#{protocol}.rb&quot;</span>
125:       <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-value str">&quot;Handler exists.&quot;</span>
126:     <span class="ruby-keyword kw">else</span>
127:       <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">fatal</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-node">&quot;No handler exists for #{protocol}.&quot;</span>
128:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Fatal Error: Could not find the handler for link protocol #{protocol}.&quot;</span>
129:       <span class="ruby-identifier">exit</span> <span class="ruby-value">1</span>
130:     <span class="ruby-keyword kw">end</span>
131: 
132:     <span class="ruby-identifier">load</span>(<span class="ruby-node">&quot;protocols/#{protocol}.rb&quot;</span>)
133: 
134:     <span class="ruby-comment cmt"># This will instantiate the classes and whatnot needed for communication</span>
135:     <span class="ruby-comment cmt"># with the IRC server. We'll keep this in @@link and use that for sending</span>
136:     <span class="ruby-comment cmt"># commands and messages to IRC.</span>
137:     <span class="ruby-identifier">@@link</span> = <span class="ruby-constant">Modulus</span><span class="ruby-operator">::</span><span class="ruby-constant">ProtocolAbstraction</span>.<span class="ruby-identifier">new</span>
138: 
139:     <span class="ruby-comment cmt"># Now that we're connected to the IRC server, we need to hook ourselves to</span>
140:     <span class="ruby-comment cmt"># process signals so we can cleanly quit or rehash when asked.</span>
141:     <span class="ruby-identifier">trap</span>(<span class="ruby-value str">&quot;INT&quot;</span>){ <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">closeConnection</span>() }
142:     <span class="ruby-identifier">trap</span>(<span class="ruby-value str">&quot;TERM&quot;</span>){ <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">closeConnection</span>() }
143:     <span class="ruby-identifier">trap</span>(<span class="ruby-value str">&quot;KILL&quot;</span>){ <span class="ruby-identifier">exit</span> } <span class="ruby-comment cmt"># Kill (signal 9) is pretty hardcore. Just exit!</span>
144: 
145:     <span class="ruby-identifier">trap</span>(<span class="ruby-value str">&quot;HUP&quot;</span>, <span class="ruby-value str">&quot;IGNORE&quot;</span>) <span class="ruby-comment cmt"># TODO: Rehash.</span>
146: 
147:     <span class="ruby-comment cmt"># We're going to need at least one way to talk to IRC users, so let's</span>
148:     <span class="ruby-comment cmt"># create the Global user first thing.</span>
149:     <span class="ruby-identifier">@@clients</span>.<span class="ruby-identifier">addClient</span>(<span class="ruby-value str">'Global'</span>, <span class="ruby-value str">&quot;Global Noticer&quot;</span>)
150: 
151:     <span class="ruby-comment cmt"># Let's start connecting! This is synchronous, but ends with the listener</span>
152:     <span class="ruby-comment cmt"># loop thread being returned once connection is complete.</span>
153:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-value str">&quot;Connecting.&quot;</span>
154:     <span class="ruby-identifier">thread</span> = <span class="ruby-identifier">startConnectionThread</span>
155: 
156:     <span class="ruby-identifier">@@clients</span>.<span class="ruby-identifier">joinLogChan</span>
157: 
158:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">info</span> <span class="ruby-value str">&quot;core&quot;</span>, <span class="ruby-value str">&quot;IRC Services has started successfully.&quot;</span>
159: 
160:     <span class="ruby-comment cmt"># TODO: Don't sleep. Fire an event when sync is done!</span>
161:     <span class="ruby-identifier">sleep</span> <span class="ruby-value">0.5</span>
162:     <span class="ruby-identifier">@@events</span>.<span class="ruby-identifier">event</span>(<span class="ruby-value">:done_connecting</span>)
163: 
164:     <span class="ruby-comment cmt"># Right now, we're going to keep running in the foreground. Before we go to</span>
165:     <span class="ruby-comment cmt"># beta, we'll want to fork to the background instead.</span>
166:     <span class="ruby-identifier">thread</span>.<span class="ruby-identifier">join</span>
167:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="start-onnection-hread-method" class="method-detail ">
				<a name="method-c-startConnectionThread"></a>

				<div class="method-heading">
				
					<span class="method-name">startConnectionThread</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Initiate a new connection to the IRC server. The current list of services
clients will be used during sync.
</p>
					

					
					<div class="method-source-code"
						id="start-onnection-hread-source">
<pre>
     <span class="ruby-comment cmt"># File includes/core.rb, line 355</span>
355:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">startConnectionThread</span>
356:     <span class="ruby-identifier">@@link</span>.<span class="ruby-identifier">connect</span>(<span class="ruby-identifier">@@clients</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">values</span>)
357:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="start--method" class="method-detail ">
				<a name="method-c-startDB"></a>

				<div class="method-heading">
				
					<span class="method-name">startDB</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Connect the database or open the database file, depending on configuration.
This should be called during <a href="Modulus.html">Modulus</a> start-up
only once. If successful, the database_connected event will fire.
</p>
					

					
					<div class="method-source-code"
						id="start--source">
<pre>
    <span class="ruby-comment cmt"># File includes/database.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">startDB</span>
27:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">info</span> <span class="ruby-value str">'database'</span>, <span class="ruby-value str">'Starting database connection for the first time this session.'</span>
28: 
29:     <span class="ruby-identifier">type</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_type'</span>)
30:     <span class="ruby-identifier">type</span>.<span class="ruby-identifier">downcase!</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
31: 
32:     <span class="ruby-identifier">validAdapters</span> = [<span class="ruby-value str">&quot;sqlite3&quot;</span>,<span class="ruby-value str">&quot;mysql&quot;</span>,<span class="ruby-value str">&quot;postgresql&quot;</span>]
33: 
34:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">validAdapters</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">type</span>
35:       <span class="ruby-comment cmt"># If we ever get here, something really bad must have happened.</span>
36:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Fatal error: Invalid database type selected in database_type. Must be one of: #{validAdapters.join(&quot;, &quot;)}.&quot;</span>
37:       <span class="ruby-identifier">exit</span> <span class="ruby-value">1</span>
38:     <span class="ruby-keyword kw">end</span>
39: 
40:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">logger</span>
41:     <span class="ruby-comment cmt">#ActiveRecord::Base.colorize_logging = false</span>
42: 
43:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'database'</span>, <span class="ruby-node">&quot;Connecting to #{type} database.&quot;</span>
44: 
45:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">type</span>
46:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;sqlite3&quot;</span>
47:         <span class="ruby-comment cmt"># This is the filename. It's all we need. Sweet!</span>
48:         <span class="ruby-identifier">name</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_name'</span>)
49: 
50:         <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(
51:           <span class="ruby-value">:adapter</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;sqlite3&quot;</span>,
52:           <span class="ruby-value">:database</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>)
53: 
54:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;mysql&quot;</span>
55:         <span class="ruby-identifier">host</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_address'</span>)
56:         <span class="ruby-identifier">user</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_user_name'</span>)
57:         <span class="ruby-identifier">password</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_password'</span>)
58:         <span class="ruby-identifier">name</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_name'</span>)
59: 
60:         <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(
61:           <span class="ruby-value">:adapter</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;mysql&quot;</span>,
62:           <span class="ruby-value">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">host</span>,
63:           <span class="ruby-value">:username</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">username</span>,
64:           <span class="ruby-value">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">password</span>,
65:           <span class="ruby-value">:database</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>)
66: 
67: 
68:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">&quot;postgresql&quot;</span>
69:         <span class="ruby-identifier">host</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_address'</span>)
70:         <span class="ruby-identifier">user</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_user_name'</span>)
71:         <span class="ruby-identifier">password</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_password'</span>)
72:         <span class="ruby-identifier">name</span> = <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">getOption</span>(<span class="ruby-value str">'Database'</span>, <span class="ruby-value str">'database_name'</span>)
73: 
74:         <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">establish_connection</span>(
75:           <span class="ruby-value">:adapter</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;mysql&quot;</span>,
76:           <span class="ruby-value">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">host</span>,
77:           <span class="ruby-value">:username</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">username</span>,
78:           <span class="ruby-value">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">password</span>,
79:           <span class="ruby-value">:database</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>)
80: 
81:     <span class="ruby-keyword kw">end</span>
82: 
83:     <span class="ruby-identifier">$log</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'database'</span>, <span class="ruby-value str">&quot;Connection to database successful.&quot;</span>
84:     <span class="ruby-constant">Modulus</span>.<span class="ruby-identifier">events</span>.<span class="ruby-identifier">event</span>(<span class="ruby-value">:database_connected</span>)
85: 
86:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="users-method" class="method-detail ">
				<a name="method-c-users"></a>

				<div class="method-heading">
				
					<span class="method-name">users</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="users-source">
<pre>
    <span class="ruby-comment cmt"># File includes/vars.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">users</span>
26:     <span class="ruby-identifier">@@users</span>
27:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

